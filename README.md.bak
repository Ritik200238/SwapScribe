# SwapScribe - Crypto Subscription Platform

**Powered by SideShift.ai** - Accept recurring crypto payments in 200+ assets, get paid in your preferred stablecoin.

Built for the SideShift.ai Buildathon Wave 3.

## ğŸš€ Features

### For Merchants
- **Create subscription plans** with flexible pricing (monthly/yearly)
- **Accept 200+ cryptocurrencies** via SideShift.ai
- **Get paid in stablecoins** (USDC, USDT on multiple networks)
- **Dashboard analytics** - Track subscribers, revenue, and invoices
- **Automated billing** - System creates invoices each billing cycle
- **No custody** - Funds go directly to your wallet

### For Subscribers
- **Pay with any crypto** - Use BTC, ETH, SOL, or 200+ other assets
- **One-click checkout** - Simple email + crypto payment flow
- **QR code payments** - Mobile-friendly deposit flow
- **Real-time tracking** - Monitor payment status

## ğŸ› ï¸ Tech Stack

- **Next.js 15** (App Router, React Server Components)
- **TypeScript** - Type-safe development
- **Tailwind CSS** + **shadcn/ui** - Beautiful, accessible UI
- **Prisma** + **SQLite** - Database ORM
- **SideShift.ai API v2** - Cross-chain crypto swaps
- **JWT** - Secure authentication

## ğŸ“¦ Installation

### Prerequisites
- Node.js 18+ (20+ recommended)
- npm or pnpm
- SideShift.ai account ([sign up here](https://sideshift.ai))

### Steps

1. **Clone the repository**
```bash
cd /mnt/c/Users/prate/SideShift.ai/swapscribe
```

2. **Install dependencies**
```bash
npm install
```

3. **Set up environment variables**
```bash
cp .env.example .env
```

Edit `.env` and add your SideShift API credentials:
- Get your `SIDESHIFT_SECRET` and `SIDESHIFT_AFFILIATE_ID` from [https://sideshift.ai/account](https://sideshift.ai/account)
- Generate `JWT_SECRET` with: `openssl rand -base64 32`

4. **Set up database**
```bash
npm run db:push
```

5. **Seed demo data** (optional)
```bash
npm run db:seed
```

This creates:
- Demo merchant: `demo@swapscribe.io` / `demo123`
- Two demo plans

6. **Start development server**
```bash
npm run dev
```

Visit [http://localhost:3000](http://localhost:3000)

## ğŸ¯ Usage Walkthrough

### 1. Merchant Setup

1. **Sign up** at `/login` (or use demo account)
2. Go to **Settings** and configure:
   - Business display name
   - Payout wallet address (where you receive stablecoins)
   - Preferred payout asset (USDC, USDT, etc.)

### 2. Create a Plan

1. Go to **Plans** â†’ **Create Plan**
2. Fill in:
   - Name (e.g., "Premium Monthly")
   - Description
   - Price in USD
   - Billing interval (monthly/yearly)
   - Payout asset override (optional)
3. Copy the public checkout link

### 3. Subscribe to a Plan

1. Open the checkout link (e.g., `/subscribe/premium-monthly-xyz123`)
2. Enter your email
3. Select deposit crypto (BTC, ETH, USDC, etc.)
4. Get deposit address + QR code
5. Send payment
6. System polls SideShift.ai every few seconds
7. Once settled, subscription activates!

### 4. Monitor Subscriptions

- **Dashboard** - View MRR, active subscriptions, pending invoices
- **Subscribers** - See all customers and their status
- **Invoices** - Track payment history

## ğŸ”§ API Integration Details

### SideShift.ai Implementation

SwapScribe uses the **SideShift v2 API**:

- **`/v2/permissions`** - Check if user can create shifts
- **`/v2/pair/:from/:to`** - Get exchange rates and limits
- **`/v2/shifts/variable`** - Create variable-rate shift
- **`/v2/shifts/:id`** - Poll shift status

### Key Features

âœ… **`x-sideshift-secret` header** - Account private key (server-side only)  
âœ… **`x-user-ip` header** - End-user IP forwarding  
âœ… **`affiliateId` parameter** - Earn 0.5% commission  
âœ… **Rate limiting awareness** - Respects 5 shifts/min, 20 quotes/min  
âœ… **Error handling** - Graceful fallbacks for all API errors  
âœ… **Polling mechanism** - Real-time status updates  

### Revenue Model

- Default 0.5% commission on all swaps
- Commissions paid in XAI tokens to your SideShift account
- Withdraw or convert XAI anytime

## ğŸ“‚ Project Structure

```
swapscribe/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                    # API routes
â”‚   â”‚   â”œâ”€â”€ auth/              # Login, signup, logout
â”‚   â”‚   â”œâ”€â”€ plans/             # CRUD for plans
â”‚   â”‚   â”œâ”€â”€ subscribe/start/   # Create subscription + shift
â”‚   â”‚   â”œâ”€â”€ invoices/          # Invoice management
â”‚   â”‚   â”œâ”€â”€ settings/          # Merchant settings
â”‚   â”‚   â””â”€â”€ dashboard/stats/   # Analytics
â”‚   â”œâ”€â”€ dashboard/             # Merchant dashboard pages
â”‚   â”œâ”€â”€ subscribe/[slug]/      # Public checkout
â”‚   â”œâ”€â”€ login/                 # Auth pages
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ui/                    # shadcn/ui components
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ db.ts                  # Prisma client
â”‚   â”œâ”€â”€ auth.ts                # JWT session management
â”‚   â”œâ”€â”€ sideshift.ts           # SideShift API client
â”‚   â”œâ”€â”€ ip.ts                  # IP extraction for x-user-ip
â”‚   â”œâ”€â”€ validators.ts          # Zod schemas
â”‚   â””â”€â”€ utils.ts               # Helpers
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma          # Database schema
â”‚   â””â”€â”€ seed.ts                # Demo data
â””â”€â”€ package.json
```

## ğŸ¨ Design Philosophy

- **Dark theme** - Easy on the eyes, modern aesthetic
- **Mobile-first** - Responsive on all devices
- **Fast** - Optimistic UI, minimal loading states
- **Accessible** - ARIA labels, keyboard navigation
- **Professional** - Ready for production use

## ğŸš¢ Deployment

### Vercel (Recommended)

1. Push to GitHub
2. Connect to Vercel
3. Add environment variables
4. Deploy!

**Important**: Change `DATABASE_URL` to PostgreSQL for production:
```env
DATABASE_URL="postgresql://user:pass@host:5432/db?schema=public"
```

Then run:
```bash
npx prisma migrate dev --name init
npx prisma generate
```

### Environment Variables for Production

```env
DATABASE_URL="postgresql://..."
SIDESHIFT_SECRET="your_secret"
SIDESHIFT_AFFILIATE_ID="your_id"
JWT_SECRET="your_jwt_secret_min_32_chars"
NEXT_PUBLIC_APP_URL="https://your-domain.com"
```

## ğŸ§ª Testing

1. Use demo account: `demo@swapscribe.io` / `demo123`
2. Create a test plan
3. Open checkout link in incognito
4. Use SideShift.ai testnet or small amounts
5. Monitor invoice status in dashboard

## ğŸ“ Judging Criteria Alignment

### âœ… API Integration & Technical Execution (20%)
- Uses v2 endpoints correctly
- Handles `x-sideshift-secret`, `affiliateId`, `x-user-ip`
- Respects rate limits
- Robust error handling
- Clean API wrapper in `lib/sideshift.ts`

### âœ… Originality & Innovation (20%)
- **Recurring subscriptions** using crypto swaps (novel!)
- Multi-tenant platform (many merchants)
- Flexible deposit assets, stable payouts
- Auto-renewal system

### âœ… Use Case Relevance & Value Creation (15%)
- Solves real pain: businesses want stable revenue
- Subscribers want payment flexibility
- "Stripe for Crypto" positioning
- Clear revenue model

### âœ… Crypto-Native Thinking (15%)
- Non-custodial: funds never held
- Respects blockchain networks/memos
- Handles min/max deposit ranges
- Acknowledges manual payment requirement

### âœ… Product Design & Usability (15%)
- Clean, intuitive dashboard
- One-page subscription flow
- QR codes for mobile payments
- Real-time status polling
- Good empty states

### âœ… Presentation & Communication (15%)
- Comprehensive README
- Demo data seeded
- Clear setup instructions
- Architecture documented

## ğŸ› Known Limitations

- **Manual renewals**: Subscribers must pay each cycle (crypto limitation)
- **No email notifications**: Would need SMTP setup
- **SQLite**: Use PostgreSQL in production
- **Single merchant sessions**: MVP focuses on solo entrepreneurs

## ğŸ”® Future Enhancements

- Email reminders for upcoming invoices
- Webhook callbacks for invoice payments
- Multi-currency dashboard (show revenue in BTC, ETH, etc.)
- Subscription cancellation flow
- Usage-based billing
- Proration for upgrades/downgrades

## ğŸ“ Support

For SideShift.ai API issues:
- Email: help@sideshift.ai
- Docs: https://sideshift.ai/api/docs

For SwapScribe questions:
- Check this README
- Review code comments
- Test with demo account

## ğŸ™ Acknowledgments

- **SideShift.ai** - Excellent swap API and buildathon
- **shadcn/ui** - Beautiful component library
- **Next.js team** - Best React framework
- **Vercel** - Amazing deployment platform

---

**Built with â¤ï¸ for the SideShift.ai Buildathon Wave 3**

*License: MIT*
